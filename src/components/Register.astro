---
---

<section class="mt-40 mb-10 component">
    <h3 class="gupter text-2xl text-center component">confirma tu asistencia</h3>
    <div class="p-12 w-full flex justify-center">
        <form class="group-form gupter w-full md:w-1/3" id="myForm">
            <label for="number">Número telefónico</label> <br>
            <input type="text" class="border-2 border-black p-5 focus:border-amber-950 w-full text-xl" maxlength="10" minlength="10" id="phone"> 
            <button type="submit" class="p-5 mt-10 text-xl border-0 bg-amber-950 text-white w-full">OBTENER INVITACIÓN</button>
        </form>
    </div>
</section>

<style>
    input{
        background-color: transparent !important;
    }
</style>

<!-- 
    TODO: CON date.id GENERAR UN QR QUE TENGA LA URL
    TODO: MOSTRAR EL QR ABAJO DEL FORM
    TODO: CREAR UNA NUEVA ASTRO PAGE QUE RECIBA EL ID COMO PARAMATRO PARA MOSTRAR LA INVITACIÖN Y QUE RECIBA OTRO PARAM (ISGUEST)
    TODO: SI ISGUEST ES FALSE NO DESCARGAR LA INVITACION
    TODO: SI ISGUEST ES TRUEE DESCARGAR QR AUTOMATICAMENTE USANDO COMO PLANTILLA LA PAGE ANTERIOR Y ENVIAR URL A SMS
    TODO: ALERT QUE AVISE SOBRE LO ANTERIRO
    TODO: EN CASO DE QUE LA PERSONA NO SEA INVITADA MOSTRAR EL MENSAJE EN LUGAR DEL QR
 -->

 <script>
     const checkInvitations = async (event) =>{
        event.preventDefault();

         try{
            const phone = document.getElementById('phone').value;


            const reesponse = await fetch('api/confirm',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    phone
                })
            });

            if(!reesponse.ok){
                console.log(reesponse)
            }
            else{
                const data = await reesponse.json();
                /// GENERAR QR data.id
            }



         }catch(error){
             console.log("ERROR")
         }
     }
     document.getElementById('myForm').addEventListener('submit', checkInvitations);

 </script>